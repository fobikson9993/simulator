
=== PEŁNA LOGIKA SYMULATORA CNC — SINUMERIK 810D ===

1. Parsowanie kodu G:
   - Detekcja błędów składniowych (literówki, nieprawidłowe znaki, brak końca linii).
   - Podświetlanie błędów w edytorze.
   - Logika G00–G03, G71–G76, G90–G91, itd.
   - Obsługa bloków: N, G, M, X, Z, F, S, T itd.
   - Sprawdzenie limitów współrzędnych i offsetów.

2. Obsługa funkcji warunkowych i pętli (opcjonalnie aktywowana przyciskiem):
   - IF [warunek] GOTO Lxxxx
   - WHILE [warunek] DO Lxxxx
   - REPEAT ... UNTIL [warunek]
   - GOTO, LABEL (Lxxxx)
   - Obsługa stosu warunków i zakresów pętli.

3. Symulacja ruchów i kolizji:
   - G00 (ruch szybki) — zabezpieczenie przed wjazdem na detal (Z0).
   - G01, G02, G03 — interpolacja liniowa i kołowa.
   - Sprawdzenie przesunięć narzędzi i offsetów.
   - Historia ostrzeżeń (offsety, przekroczenia osi, kolizje).

4. Obsługa cykli:
   - G71: obróbka zgrubna (CycleG71.js):
       G71 P10 Q20 U... W... F...
       -> Symulacja konturu na podstawie bloków P do Q
   - G76: gwintowanie
   - G73: półzgrubna

5. Obsługa M-kodów:
   - M00 — Stop bezwarunkowy
   - M01 — Stop warunkowy
   - M03/M04 — Obrót wrzeciona CW/CCW
   - M05 — Stop wrzeciona
   - M06 — Zmiana narzędzia
   - M08/M09 — Chłodziwo ON/OFF
   - M30 — Koniec programu i restart

6. Moduły:
   - interpreter.js — parser G-kodu i executor
   - CycleG71.js — logika i kontur G71
   - konsola.js — interfejs tekstowy do testów
   - walidator.js — ostrzeżenia i błędy
   - exporter.js — zapis do pliku .nc

7. Logika działania (przykład):
   START PROGRAMU
   |
   V
   Parsowanie G-kodu linia po linii
   |
   V
   Weryfikacja poprawności + IF/WHILE (jeśli aktywne)
   |
   V
   Symulacja trajektorii G00–G03 + G71
   |
   V
   Detekcja kolizji, limity, offsety
   |
   V
   Generowanie ostrzeżeń
   |
   V
   Wyświetlenie wyników w konsoli + eksport
   |
   V
   KONIEC PROGRAMU

8. Przykładowe linie kodu:
   N10 G00 X100 Z5
   N20 G01 Z0 F0.2
   N30 IF [X GT 50] GOTO L100
   N40 WHILE [Z GT -10] DO L200
   N50 G71 P10 Q20 U2 W0.2 F0.25

9. Eksport:
   - Zapis do .nc z datą i nazwą detalu
   - Możliwość podglądu i pobrania przez użytkownika

10. Przycisk "Zaawansowane funkcje":
   - Dopiero po jego kliknięciu aktywuje się możliwość generowania pętli IF/WHILE/REPEAT przez generator.

=== KONIEC LOGIKI ===
